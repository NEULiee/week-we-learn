#### 참조. 메모리 구조 (프로세스 당)

|코드|데이터|힙|스택|
|-|-|-|-|
|명령어/프로그램|전역변수, 타입변수|동적할당|함수 실행|
|앱의 모든 코드|공통으로 공유하는 데이터|개발자가 관리하는 데이터|크기가 작고 빠르게 사용|

<br><br><br>

# 클래스

> 클래스 : 객체를 정의하는 틀

```swift
class Dog {
    // 속성 (property) : 클래스의 변수
    var name: String

    init(name: String) {
        self.name = name
    }
    
    // 메서드 (method) : 클래스의 함수
    func sit() {
        print("앉았습니다.")
    }
}
```

<br>

> 객체 (인스턴스) : 실제 데이터

```swift
var 시오 = Dog("시오")
var 배찌 = Dog("배찌")
```

<br>

### 클래스의 메모리

- 클래스의 객체는 **참조타입 (reference type)** 이다.
- **힙 영역**에 저장되어 ARC 시스템을 통해 메모리를 관리한다.

<br>

|코드|데이터|힙|스택|
|-|-|-|-|
| |class|class 객체|class 객체를 참조하는 메모리 값|

<br><br>

# 구조체

> 구조체: 구조화 된 데이터

```swift
struct Bird {
    var name = "새"
    
    func fly() {
        print("날아갑니다.")
    }
}
```

<br>

> 인스턴스 : 실제 데이터

```swift
var aBird = Bird()
```

- 구조체의 인스턴스는 **값 타입 (value type)** 이다.
- 스택 영역에 저장되고, **스택프레임 종료시 메모리에서 자동 제거**된다.

<br>

|코드|데이터|힙|스택|
|-|-|-|-|
| |struct||인스턴스|

<br><br><br>

# 클래스와 구조체의 메모리 복사

### 클래스 : 객체가 저장된 주소를 전달

```swift
class Person {
	var name = "사람"
}

var p = Person() // x1234
var p2 = p // x1234
p.name = "해리"

print(p.name) // 해리
print(p2.name) // 해리
```

<br>

### 구조체 : 복사본 (다른 메모리 공간) 생성

```swift
struct Animal 
	var name = "동물"
}

var a = Animal()
var a2 = a
a.name = "강아지"

print(a.name) // 강아지
print(a2.name) // 동물
```

<br><br>

## 구조체, 클래스 언제 사용해야 할까?

> **구조체** <br>
> 메모리에 오랫동안 저장하지 않고, 상속없이 조금 가볍게 사용할 때
 
- 연관된 데이터들을 단순히 캡슐화 할 때
- 캡슐화 한 데이터를 참조하는 것보다 복사해서 사용하는 것이 효율적일 때
- 구조체에 저장된 저장 속성들이 값 타입이며 참조하는 것보다 복사하는 것이 합당할 때

<br>

> **클래스** <br>
> 메모리에 오랫동안 저장 (관리) 하고 상속이 필요할 때

- 상속의 구조가 필요할 때
- 해당 모델을 serialize 해서 전송하거나 파일로 저장할 경우